package compress

import (
	"bytes"
	"testing"
)

func TestCompressBytes(t *testing.T) {
	in := "123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789" +
		"123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789" +
		"123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789" +
		"123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789" +
		"123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789" +
		"123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789"
	out, err := CompressBytes([]byte(in))
	if err != nil {
		t.Fatalf("Compress failed %s", err.Error())
	}
	t.Logf("Compress success: in length = %d, out length = %d", len(in), len(out))

	newIn, err := DecompressBytes(out)
	if err != nil {
		t.Fatalf("Decompress failed %s", err.Error())
	}
	if bytes.Compare([]byte(in), newIn) != 0 {
		t.Fatalf("Decompress failed")
	}
	t.Logf("Decompress success")
}
